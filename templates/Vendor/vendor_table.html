{% extends 'base.html' %}
{% import "macros.jinja" as macros %}
{% block title%} Vendor List
{% endblock %}

{% block css%}
{% endblock %}

{%block scripts%}
    <script type="text/javascript">
        $(document).ready(function() {
			AjaxDatatableViewUtils.initialize_table(
                $("#example"),
                "../datatable/",
                {
					"scrollX": true,
					"columnDef" : [
						{responsivePriority: 2, targets: 1},
						{
							//targets : [2,7,8,9],
							className : "all",
						},
					],
                    processing: false,
                    autoWidth: false,
                    full_row_select: false,
                    scrollX: false,
                    dom: "<'row'<'col-sm-12 col-md-8'l><'col-sm-12 col-md-4 p-1 bg-light rounded rounded-pill shadow-sm mb-4 search_div'f>>" + "<'row'<'col-sm-12'tr>>" + "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",
                },
                {
                }
            );
			let faculty_last_searched = false;
			$("#example").on("draw.dt", function () {
				let initial_value = $(".search_div input").val();
				$(".search_div").html(`
					<div id="faculty_details_filter" class="dataTables_filter">
						<div class="input-group">
							<input type="search" placeholder="Global Search" aria-describedby="button-addon1" 
								class="form-control form-control-sm border-0 bg-light" id="global_search_box_faculty"
								style="box-shadow:none;outline:none" aria-controls="faculty_details">
							<div class="input-group-append">
								<button id="button-addon1" type="submit" class="btn btn-link text-primary" style="box-shadow:none;outline:none;padding:0;z-index:20"><i class="fa fa-search" style="transform:translateX(-10px)"></i></button>
							</div>
						</div>
					</div>`
				);
				$(".search_div input").val(initial_value)
				if (faculty_last_searched)
					$(".search_div input").focus();
				$(".datatable-column-filter-row input").on("input", function () {
					faculty_last_searched = false;
				});
				$("#global_search_box_faculty").on("input", function () {
					faculty_last_searched = true;
					var table = $.fn.dataTable.Api($("#example"));
					table.search($(this).val()).draw();
				});
			});
        });
    </script>
{% endblock %}

{% block content %}
	<div class="main_content h-100">
        <div class="container-fluid table_container" style="padding-top: 6rem">
			<a href="{{url ('add_vendor')}}"  class="d-flex justify-content-center text-decoration-none">
				<button class="btn btn-success w-75">
					Add Vendor
				</button>
			</a>
			<div class="container-fluid p-2 table_container">
				<div class="card shadow-sm mb-4 p-2 components-section" style="border-radius: 1rem;">
					<div class="card-body" style="border-radius: 1rem;">
						<div class="row text-center">
							<div class="col-lg-12 col-sm-12">
								<div class="h3 text-center">Vendor List</div>
								<a style="display: none;" id="del" onclick="delete_entries(false)" >
									<img class="input_icons" src="{{static ('Images/trash.png')}}" alt="Delete">
								</a>
							</div>
							<!-- <div class="col-lg-2 col-sm-12">
							</div> -->
						</div>
						<div class="table-responsive">
							<table class="table datatables table-centered fw-bold text-center table-nowrap mb-0 rounded" id="example">
							</table>
						</div>
					</div>
				</div>
			</div>
        </div>
    </div>
{% endblock %}